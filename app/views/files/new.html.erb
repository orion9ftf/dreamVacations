<h1>Upload File</h1>

<%= form_with url: files_path, local: true, method: :post, multipart: true do |form| %>
  <div class="field">
    <%= form.label :file %>
    <%= form.file_field :file %>
  </div>

  <div class="actions">
    <%= form.submit 'Upload' %>
  </div>
<% end %>

<% if @data.present? %>
  <h2>Uploaded Data</h2>
  <table>
    <thead>
      <tr>
        <% @data.first.each do |header| %>
          <th><%= header %></th>
        <% end %>
      </tr>
    </thead>
    <tbody>
      <% @data[1..].each do |row| %>
        <tr>
          <% row.each do |cell| %>
            <td><%= cell %></td>
          <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %>

<%= link_to 'Back', new_file_path %>

